<!DOCTYPE html>
<html>
<head>
  <title>Superwatch</title>
  <%= stylesheet_link_tag "bootstrap-1.3.0.css", "application", "repos"  %>
  <%= javascript_include_tag "application" %>
  <%= csrf_meta_tags %>
</head>
<body>
	<div id="status-bar">
    <div id="submitting" style="display:none"><strong>Submitting..</strong></div>
    <div class="responding" style="display:none">&#160;</div>
  </div>

	<div id="top">		
		<div id="user_nav">
			<div>
				
				<ul class="left">
					<li><a href="/" class="logo">superwatch | alpha</a></li>
					<li><span>"it's like [old] delicious for GitHub projects."</span></li>
				</ul>

				<ul class="right">
		  <% if current_user %>
				<li>signed in as: <%= link_to current_user.login, user_path(current_user.login), :class => "link" %></li>
				<li><%= link_to (image_tag current_user.avatar_url), user_path(current_user.login) %></li>
				<li><%= link_to "Sign Out", signout_path, :class => "btn" %></li>
		  <% else %>
		    <li><%= link_to "Sign in with Github", "/auth/github", :class => "signin btn" %></li>
		  <% end %>
				</ul>
			</div>
		</div>
	
		<div id="headers">
			<div id="filters_container">
				<div id="filters">
					<%= yield :filters %>
				</div>
			</div>

			<div id="tag_panel_container" style="display:none">
				
			<% if current_user %>
				<span id="current_user_data" style="display:none"><%= current_user.login %></span>
				
				<%= form_tag tag_path, :method => :get, :id => "tag_panel" do %>
					<input class="ghid" type="hidden" name="repo[ghid]" value="" />
					Tag <a class="btn repo_name"> </a> with <input id="tagging_input" type="text" name="tag" size="100" maxlength="100" /> 
					<button type ="submit" class="btn success">submit</button>
					<a href="#" class="btn danger tag_panel_close">x</a>
				<% end %>
				
				<div id="tag_panel_extended">
					
					<h4>Your Tags</h4>
					<p>Click tags to remove them from this repo.</p>
					<ul id="my_tags_on_repo" class="tag_box inline">
						
					</ul>
					
					<h4>Top Tags</h4>
					<p>Click tags to add/remove them from the input box</p>
					<ul id="add_tag_container" class="tag_box inline">

					</ul>
					
				</div>
				
			<% else %>
				<div class="alert-message warning">
					<p>					
						<a class="btn danger tag_panel_close" href="#">x</a>
							You'll need to <%= link_to "Sign in with GitHub", "/auth/github", :class => "btn" %> to start adding tags.
					</p>
				</div>
			<% end %>
			
			</div>
			
			<div class="tag_header">
				<div>
					<%= yield :tag_header %>
				</div>
			</div>
			
		</div>
	</div>
	<div id="top_spacer">&#160;</div>

	<div id="main_content_container">
		<div id="main_content">
			<%= yield %>
		</div>
	</div>

	<div id="side_content_container">
		<div id="side_content">
			<%= yield :side_content %>
		</div>
	</div>

	<div id="footer">
		<ul>
			<li><a href="/">home</a></li>
			<li><a href="/about">about</a></li>
			<li><a href="http://github.com" target="_blank">github.com</a></li>
		</ul>
	</div>
	
	<script id="tagTemplate" type="text/x-jquery-tmpl">
		<li><a href="#" class="tag" title="${name}">${name}</a></li>
	</script>

</body>
</html>
